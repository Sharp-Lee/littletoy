# 跨平台打包方案

## 问题说明

PyInstaller **不支持跨平台打包**，即：
- 在Mac上打包 → 只能生成Mac可执行文件
- 在Windows上打包 → 只能生成Windows exe文件
- 在Linux上打包 → 只能生成Linux可执行文件

## 解决方案

### 方案一：在Windows系统上打包（推荐）

这是最简单直接的方法。

#### 步骤1：准备文件
将以下文件复制到Windows系统：
- `汇总脚本.py`
- `requirements.txt`
- `build_windows.bat`
- `pyinstaller.spec`

#### 步骤2：在Windows上打包
1. 双击运行 `build_windows.bat`
2. 或手动运行：
```bash
pip install pyinstaller
pyinstaller --onefile --name=转粮数据汇总工具 --console 汇总脚本.py
```

### 方案二：使用GitHub Actions自动打包（高级）

创建一个GitHub仓库，使用GitHub Actions在Windows环境中自动打包。

#### 创建 `.github/workflows/build-windows.yml`：

```yaml
name: Build Windows Executable

on:
  push:
    tags:
      - 'v*'
  workflow_dispatch:

jobs:
  build:
    runs-on: windows-latest
    
    steps:
    - uses: actions/checkout@v3
    
    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.10'
    
    - name: Install dependencies
      run: |
        python -m pip install --upgrade pip
        pip install -r requirements.txt
        pip install pyinstaller
    
    - name: Build executable
      run: |
        pyinstaller --onefile --name=转粮数据汇总工具 --console 汇总脚本.py
    
    - name: Upload artifact
      uses: actions/upload-artifact@v3
      with:
        name: windows-exe
        path: dist/转粮数据汇总工具.exe
```

### 方案三：使用Docker（需要Windows容器）

如果有Windows Docker环境，可以在Windows容器中打包。

### 方案四：使用虚拟机

在Mac上运行Windows虚拟机，然后在虚拟机中打包。

## 推荐方案

**最简单**：将文件复制到Windows系统，使用 `build_windows.bat` 自动打包

**最专业**：使用GitHub Actions，每次推送代码自动生成Windows exe

## 当前Mac环境可以做什么

在Mac上，你可以：

1. **测试脚本**：确保脚本在Mac上运行正常
2. **准备打包文件**：创建所有必要的配置文件
3. **生成Mac版本**：如果需要Mac版本，可以打包：
```bash
pip install pyinstaller
pyinstaller --onefile --name=转粮数据汇总工具 汇总脚本.py
```

## 快速打包脚本（Mac版本）

如果需要Mac版本，可以创建 `build_mac.sh`：

```bash
#!/bin/bash
echo "开始打包Mac版本..."
pip install pyinstaller
pyinstaller --onefile --name=转粮数据汇总工具 汇总脚本.py
echo "打包完成！文件位于 dist/转粮数据汇总工具"
```

